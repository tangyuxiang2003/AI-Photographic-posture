<view class="gallery-container">
  <!-- æœç´¢æ¡† -->
  <view class="search-bar">
    <input 
      class="search-input" 
      placeholder="æœç´¢åœºæ™¯ã€äººç‰©æˆ–ç‰©å“ã€å¤šä¸ªä»¥ç©ºæ ¼åŒºåˆ†"
      value="{{searchKeyword}}"
      bindconfirm="onSearch"
      bindinput="onSearchInput"
    />
    <image class="search-icon" src="/images/icons/search.svg" mode="aspectFit" bindtap="onSearch" />
  </view>

  <!-- å¿«æ·æœç´¢æ ‡ç­¾ -->
  <view class="quick-tags" wx:if="{{quickSearchTags.length > 0}}">
    <scroll-view class="quick-tags-scroll" scroll-x enable-flex>
      <view 
        wx:for="{{quickSearchTags}}" 
        wx:key="index"
        class="quick-tag-item"
        bindtap="onQuickTagTap"
        data-tag="{{item}}"
      >
        {{item}}
      </view>
    </scroll-view>
  </view>

  <!-- å§¿åŠ¿åˆ—è¡¨ -->
  <scroll-view class="pose-list" scroll-y>
    <!-- åŠ¨æ€æ¸²æŸ“å§¿åŠ¿åˆ†ç»„ -->
    <view class="pose-section" wx:for="{{poseGroups}}" wx:key="tag" wx:for-item="group">
      <view class="section-header">
        <view class="section-title">
          <text class="section-emoji">ğŸ“¸</text>
          <text>{{group.tag}}</text>
        </view>
        <view class="view-all" bindtap="onViewAll" data-tag="{{group.tag}}">
          å…¨éƒ¨ <text class="arrow">></text>
        </view>
      </view>
      
      <view class="pose-grid">
        <view 
          wx:for="{{group.poses}}" 
          wx:key="id"
          wx:for-item="pose"
          class="pose-item"
        >
          <image 
            class="pose-image" 
            src="{{pose.url}}" 
            mode="aspectFill" 
            bindtap="onPoseTap"
            data-pose="{{pose}}"
            data-group="{{group}}"
          />
          
          <!-- æ”¶è—æŒ‰é’®ï¼ˆä»…ç™»å½•ç”¨æˆ·å¯è§ï¼‰ -->
          <view wx:if="{{isLoggedIn}}" class="favorite-btn" catchtap="onToggleFavorite" data-pose="{{pose}}" data-group="{{group}}">
            <image 
              class="favorite-icon" 
              src="{{favoriteMap[pose.id] ? '/images/icons/heart-filled.svg' : '/images/icons/heart.svg'}}" 
              mode="aspectFit" 
            />
          </view>
          
          <view class="pose-overlay">
            <button class="use-btn" catchtap="onUse" data-pose="{{pose}}">ä½¿ç”¨</button>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{poseGroups.length === 0}}">
      <text class="empty-text">æš‚æ— å§¿åŠ¿æ•°æ®</text>
    </view>
  </scroll-view>
</view>