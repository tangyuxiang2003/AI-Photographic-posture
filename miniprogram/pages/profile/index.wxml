<view class="profile-page" style="background: {{themeBg}};">
  <!-- 标题 -->
  <view class="section-title">
    <text>个人中心</text>
  </view>

  <!-- 档案卡片（静态） -->
  <view class="profile-card">
    <view class="profile-left">
      <!-- 登录后：头像区域可点击选择微信头像；未登录：占位 -->
      <block wx:if="{{profile.hasAuth}}">
        <view class="avatar-wrap" style="position: relative;">
          <image class="avatar" src="{{profile.avatarUrl}}" mode="aspectFill"></image>
          <!-- 透明按钮覆盖头像，实现点击头像选择微信头像 -->
          <button class="avatar-chooser-btn"
                  open-type="chooseAvatar"
                  bindchooseavatar="onChooseAvatar"
                  hover-class="none"
                  style="position:absolute;left:0;top:0;width:120rpx;height:120rpx;opacity:0;background:transparent;border:none;padding:0;">
          </button>
        </view>
      </block>
      <block wx:else>
        <view class="avatar-wrap">
          <view class="avatar placeholder"></view>
        </view>
      </block>
      <view class="profile-info">
        <view class="nickname-row">
          <view class="nickname">{{profile.hasAuth ? profile.nickName : '未登录'}}</view>
          <view class="level-pill">Lv.1</view>
        </view>
        <view class="auth-tip">{{profile.hasAuth ? '已授权头像昵称' : '未登录，请授权头像昵称'}}</view>
        <view class="progress">
          <view class="progress-bar" style="width: 20%;"></view>
        </view>
      </view>
    </view>
    <view wx:if="{{!profile.hasAuth}}" style="display:flex; flex:1; height:100%; align-items:center; justify-content:center;">
      <button class="btn-mini primary" size="mini" bindtap="onTapProfileLogin">点击登录</button>
    </view>
    <view wx:if="{{profile.hasAuth}}" style="display:flex; flex:1; height:100%; align-items:center; justify-content:center;">
      <button class="btn-mini primary" size="mini" bindtap="onEditNickname" style="font-size:22rpx;">修改昵称</button>
    </view>
  </view>

  <!-- 统计卡片 -->
  <view class="stats-card">
    <view class="stat-item">
      <view class="stat-num">{{stats.photos}}</view>
      <view class="stat-label">上次生成</view>
    </view>
    <view class="stat-item">
      <view class="stat-num">{{stats.favorites}}</view>
      <view class="stat-label">收藏</view>
    </view>
    <view class="stat-item">
      <view class="stat-num">{{stats.following}}</view>
      <view class="stat-label">关注</view>
    </view>
  </view>

  <!-- 设置（静态） -->
  <view class="section-title small">
    <text>设置</text>
  </view>
  <view class="settings-card">
    <view class="setting-row">
      <view class="setting-texts">
        <view class="setting-title">高清保存</view>
        <view class="setting-sub">保存更清晰的图像</view>
      </view>
      <switch checked="true" disabled="true" color="{{switchOnColor}}"></switch>
    </view>
    <view class="setting-row">
      <view class="setting-texts">
        <view class="setting-title">展示拍照小技巧</view>
        <view class="setting-sub">首页展示关键词与姿势灵感</view>
      </view>
      <switch checked="{{tipsEnabled}}" bindchange="onToggleTipsEnable" color="{{switchOnColor}}"></switch>
    </view>
    <view class="setting-row">
      <view class="setting-texts">
        <view class="setting-title">背景主题色</view>
        <view class="setting-sub">从调色盘选择你喜欢的背景色</view>
      </view>
      <view style="display:flex; align-items:center; gap:16rpx;">
        <view class="color-preview" style="background: {{themeBg}};"></view>
        <switch checked="{{themeEnabled}}" bindchange="onToggleThemeEnable" color="{{switchOnColor}}"></switch>
      </view>
    </view>
    <view class="color-palette" wx:if="{{themeEnabled}}">
      <block wx:for="{{palette}}" wx:key="*this">
        <view class="color-swatch {{item === themeBg ? 'selected' : ''}}"
              style="background: {{item}};"
              data-color="{{item}}"
              bindtap="onPickTheme">
        </view>
      </block>
    </view>
  </view>

  <!-- 常用功能（静态） -->
  <view class="section-title small">
    <text>常用功能</text>
  </view>
  <view class="action-list">
    <!-- 1. 我的收藏 -->
    <view class="action-item" bindtap="onTapMyFavorites">
      <view class="action-left">
        <image class="action-icon" src="../../images/icons/goods.png" mode="aspectFit"></image>
        <view class="action-text">我的收藏</view>
      </view>
      <view class="action-right"><text class="action-arrow">›</text></view>
    </view>

    <!-- 3. 用户建议（原“给你一点儿建议”） -->
    <view class="action-item" bindtap="onTapSuggestions">
      <view class="action-left">
        <image class="action-icon" src="../../images/icons/customer-service.svg" mode="aspectFit"></image>
        <view class="action-text">用户建议</view>
      </view>
      <view class="action-right"><text class="action-arrow">›</text></view>
    </view>

    <!-- 6. 关于 -->
    <view class="action-item">
      <view class="action-left">
        <image class="action-icon" src="../../images/icons/question.svg" mode="aspectFit"></image>
        <view class="action-text">关于</view>
      </view>
      <view class="action-right"><text class="action-arrow">›</text></view>
    </view>
  </view>


</view>