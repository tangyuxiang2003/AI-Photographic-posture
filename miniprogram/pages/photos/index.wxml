<view class="wrap">
  <!-- 统计与操作 -->
  <view class="stats-bar">
    <view class="stats-text">已收藏：{{favorites.length}} 条</view>
    <button class="refresh-btn" bindtap="onShuffle">换一批推荐</button>
  </view>

  <!-- 筛选标签 -->
  <scroll-view class="tabs" scroll-x="true" enable-flex>
    <view class="tab {{activeTab==='全部'?'active':''}}" data-tab="全部" bindtap="onSetTab">全部</view>
    <view class="tab {{activeTab==='风格'?'active':''}}" data-tab="风格" bindtap="onSetTab">风格</view>
    <view class="tab {{activeTab==='场景'?'active':''}}" data-tab="场景" bindtap="onSetTab">场景</view>
    <view class="tab {{activeTab==='姿势'?'active':''}}" data-tab="姿势" bindtap="onSetTab">姿势</view>
    <view class="tab {{activeTab==='道具'?'active':''}}" data-tab="道具" bindtap="onSetTab">道具</view>
  </scroll-view>

  <!-- 搜索 -->
  <view class="search-bar">
    <input class="search-input"
           placeholder="搜索关键词，如 韩系 / 花墙 / 回眸"
           value="{{query}}"
           bindinput="onSearchInput" />
    <button class="search-clear" wx:if="{{query}}" bindtap="onClearSearch">清除</button>
  </view>

  <!-- 列表 -->
  <view wx:if="{{filtered.length}}" class="card-list">
    <block wx:for="{{filtered}}" wx:key="id">
      <view class="card">
        <image class="cover" src="{{item.cover}}" mode="aspectFill"></image>
        <view class="info">
          <view class="title">{{item.title}}</view>
          <view class="tags">
            <text class="tag" wx:for="{{item.tags}}" wx:key="*this">{{item}}</text>
          </view>
          <view class="actions">
            <button class="btn unfav" data-id="{{item.id}}" bindtap="onToggleFavorite">取消收藏</button>
            <button class="btn share" data-id="{{item.id}}" bindtap="onShare">分享</button>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- 空状态 -->
  <view wx:else class="empty">
    <view class="empty-title">还没有收藏</view>
    <view class="empty-tip">去首页挑选姿势建议，点击收藏即可在这里查看哦～</view>
    <button class="go-home" open-type="switchTab" url="/pages/index/index">去首页看看</button>
  </view>
</view>